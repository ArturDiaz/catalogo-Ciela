<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ciela - Panel de AdministraciÃ³n</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- FORMULARIO LOGIN -->
    <div id="login-form">
        <h2>ğŸ” Acceso Administrador</h2>
        <p>Ingresa tus credenciales:</p>
        
        <input type="email" id="email" placeholder="Email" value="admin@tutienda.com">
        <input type="password" id="password" placeholder="ContraseÃ±a">
        
        <button onclick="login()">Ingresar al Panel</button>
        
        <div class="info-note">
            <strong>ğŸ“ Nota:</strong> Si no tienes una cuenta, crea un usuario desde la consola JavaScript:
            <code style="display:block; margin-top:5px; background:#fff; padding:5px; border-radius:3px;">
                await window.supabaseClient.auth.signUp({email:'admin@tutienda.com', password:'tu_password'})
            </code>
        </div>
    </div>
    
    <!-- PANEL ADMIN (oculto inicialmente) -->
    <div id="admin-panel" style="display: none;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <h1>ğŸ› ï¸ Panel de Control - Ciela</h1>
            <button onclick="logout()" class="logout-btn">ğŸšª Cerrar SesiÃ³n</button>
        </div>
        
        <!-- SECCIÃ“N AGREGAR PRODUCTO -->
        <section>
            <h2>â• Agregar Nuevo Producto</h2>
            
            <input type="text" id="nombre" placeholder="Nombre del producto *" required>
            <textarea id="descripcion" placeholder="DescripciÃ³n detallada"></textarea>
            <input type="number" id="precio" placeholder="Precio *" step="0.01" min="0.01" required>
            <input type="number" id="stock" placeholder="Stock inicial *" min="0" required>
            
            <div class="file-input-container">
                <label for="imagen" style="cursor:pointer;">
                    ğŸ“ Subir imagen (opcional - JPEG, PNG, max 5MB)
                </label>
                <input type="file" id="imagen" accept="image/*" style="display:none;">
                <div id="nombre-archivo" style="margin-top:5px; font-size:0.9em; color:#666;"></div>
            </div>
            
            <div class="info-note">
                <strong>ğŸ’¡ Pro tip:</strong> Por ahora el sistema no sube imÃ¡genes reales. 
                Puedes usar URLs de servicios como <a href="https://imgbb.com/" target="_blank">ImgBB</a> o 
                <a href="https://cloudinary.com/" target="_blank">Cloudinary</a> para pruebas.
            </div>
            
            <button onclick="agregarProducto()">Agregar Producto</button>
        </section>
        
        <!-- SECCIÃ“N PRODUCTOS EXISTENTES -->
        <section>
            <h2>ğŸ“¦ Productos Existentes</h2>
            <div id="lista-productos">
                <p style="text-align:center; color:#666; padding:20px;">Cargando productos...</p>
            </div>
        </section>
    </div>
    
    <!-- CARGAR EN ESTE ORDEN: -->
    <!-- 1. Supabase SDK -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <!-- 2. ConfiguraciÃ³n -->
    <script src="js/config.js"></script>
    <!-- 3. LÃ³gica admin -->
    <script src="js/admin.js"></script>
    
    <script>
        // Mostrar nombre del archivo seleccionado
        document.getElementById('imagen').addEventListener('change', function(e) {
            const fileName = e.target.files[0]?.name || 'NingÃºn archivo seleccionado';
            document.getElementById('nombre-archivo').textContent = `Archivo: ${fileName}`;
        });
        
        // Permitir hacer clic en el contenedor para seleccionar archivo
        document.querySelector('.file-input-container').addEventListener('click', function() {
            document.getElementById('imagen').click();
        });
    </script>
</body>
</html>